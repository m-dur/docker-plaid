@startuml Application Startup Flow

skinparam {
    BackgroundColor white
    ArrowColor black
    ActorBorderColor black
    LifelineBackgroundColor white
}

actor User
participant "Flask App" as App
participant "Templates" as Templates
database "access_tokens.json" as TokenFile
participant "PlaidService" as Plaid

User -> App: Access "/"
activate App

App -> TokenFile: Read access_tokens.json
activate TokenFile
TokenFile --> App: Return saved institutions
deactivate TokenFile

App -> Plaid: create_and_store_link_token()
activate Plaid
Plaid --> App: Return link_token
deactivate Plaid

App -> Templates: Render index.html with:\n- link_token\n- institutions\n- has_access_token\n- schema_diagram
activate Templates
Templates --> User: Display homepage
deactivate Templates

deactivate App

note right of App
  Reference: app/app.py
  startLine: 26
  endLine: 52
end note

@enduml 